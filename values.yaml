# Default values for strudel
# This is a YAML-formatted file.

# CoreWeave cluster configuration
# These values should be set via ArgoCD parameters or overridden during deployment
orgID: ""
clusterName: ""

# Strudel application configuration
strudel:
  enabled: true
  image:
    repository: jonaswerner/strudel
    tag: latest
    pullPolicy: IfNotPresent
  replicas: 2
  port: 4321
  service:
    type: ClusterIP
    port: 80
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  env:
    metricsApiUrl: "http://strudel-metrics-server:9090"

# Metrics server configuration
metricsServer:
  enabled: true
  image:
    repository: jonaswerner/strudel-metrics-server
    tag: latest
    pullPolicy: IfNotPresent
  replicas: 1
  port: 9090
  resources:
    requests:
      memory: "128Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"

# Prometheus configuration
prometheus:
  enabled: true
  image:
    repository: prom/prometheus
    tag: latest
    pullPolicy: IfNotPresent
  replicas: 1
  port: 9090
  storage:
    size: 10Gi
    storageClass: ""
  retention: 30d
  # Custom Prometheus arguments (if provided, replaces default args)
  # extraArgs: []
  resources:
    requests:
      memory: "512Mi"
      cpu: "200m"
    limits:
      memory: "2Gi"
      cpu: "1000m"

# Grafana configuration
grafana:
  enabled: true
  image:
    repository: grafana/grafana
    tag: latest
    pullPolicy: IfNotPresent
  replicas: 1
  port: 3000
  adminUser: admin
  # If adminPassword is empty, a random password will be generated
  # If existingSecret is provided, it will be used instead
  adminPassword: ""
  existingSecret: ""
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"

  # Ingress configuration
  ingress:
    enabled: true
    ingressClassName: traefik
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
    tls:
      - secretName: grafana-tls
        hosts: [] 

# Ingress configuration for Strudel application
ingress:
  enabled: true
  ingressClassName: traefik
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod

  paths:
    - path: /
      pathType: Prefix
  tls:
    - secretName: strudel-tls
      hosts: []  

